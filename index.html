<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>××¢×¨×›×ª × ×™×”×•×œ ×¢×•×‘×“×™× - ×©××™×¨ ×‘×’×œ×™×œ</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Heebo', sans-serif;
        }
        
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        
        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .pulse-green {
            animation: pulseGreen 2s infinite;
        }
        
        @keyframes pulseGreen {
            0%, 100% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7); }
            50% { box-shadow: 0 0 0 10px rgba(34, 197, 94, 0); }
        }

        .modal-overlay {
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-green-50 min-h-screen">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // ××™×œ×•×Ÿ ×ª×¨×’×•× ×œ×ª××™×œ× ×“×™×ª
        const THAI_TRANSLATIONS = {
            // ×™××™× ×‘×©×‘×•×¢
            '×¨××©×•×Ÿ': 'à¸§à¸±à¸™à¸­à¸²à¸—à¸´à¸•à¸¢à¹Œ',
            '×©× ×™': 'à¸§à¸±à¸™à¸ˆà¸±à¸™à¸—à¸£à¹Œ',
            '×©×œ×™×©×™': 'à¸§à¸±à¸™à¸­à¸±à¸‡à¸„à¸²à¸£',
            '×¨×‘×™×¢×™': 'à¸§à¸±à¸™à¸à¸¸à¸˜',
            '×—××™×©×™': 'à¸§à¸±à¸™à¸à¸¤à¸«à¸±à¸ªà¸šà¸”à¸µ',
            '×©×™×©×™': 'à¸§à¸±à¸™à¸¨à¸¸à¸à¸£à¹Œ',
            '×©×‘×ª': 'à¸§à¸±à¸™à¹€à¸ªà¸²à¸£à¹Œ',
            
            // ×—×•×“×©×™×
            '×™× ×•××¨': 'à¸¡à¸à¸£à¸²à¸„à¸¡',
            '×¤×‘×¨×•××¨': 'à¸à¸¸à¸¡à¸ à¸²à¸à¸±à¸™à¸˜à¹Œ',
            '××¨×¥': 'à¸¡à¸µà¸™à¸²à¸„à¸¡',
            '××¤×¨×™×œ': 'à¹€à¸¡à¸©à¸²à¸¢à¸™',
            '×××™': 'à¸à¸¤à¸©à¸ à¸²à¸„à¸¡',
            '×™×•× ×™': 'à¸¡à¸´à¸–à¸¸à¸™à¸²à¸¢à¸™',
            '×™×•×œ×™': 'à¸à¸£à¸à¸à¸²à¸„à¸¡',
            '××•×’×•×¡×˜': 'à¸ªà¸´à¸‡à¸«à¸²à¸„à¸¡',
            '×¡×¤×˜××‘×¨': 'à¸à¸±à¸™à¸¢à¸²à¸¢à¸™',
            '××•×§×˜×•×‘×¨': 'à¸•à¸¸à¸¥à¸²à¸„à¸¡',
            '× ×•×‘××‘×¨': 'à¸à¸¤à¸¨à¸ˆà¸´à¸à¸²à¸¢à¸™',
            '×“×¦××‘×¨': 'à¸˜à¸±à¸™à¸§à¸²à¸„à¸¡',
            
            // ×›×•×ª×¨×•×ª
            '×‘×•×§×¨ ×˜×•×‘': 'à¸ªà¸§à¸±à¸ªà¸”à¸µà¸•à¸­à¸™à¹€à¸Šà¹‰à¸²',
            '×ª×•×›× ×™×ª ×”×¢×‘×•×“×” ×œ×™×•×': 'à¹à¸œà¸™à¸à¸²à¸£à¸—à¹à¸²à¸‡à¸²à¸™à¸§à¸±à¸™à¸—à¸µà¹ˆ',
            '×™×•×': 'à¸§à¸±à¸™à¸—à¸µà¹ˆ',
            
            // ×©×“×•×ª
            '××©×§': 'à¸Ÿà¸²à¸£à¹Œà¸¡',
            '×—×œ×§×”': 'à¹à¸›à¸¥à¸‡',
            '×›××•×ª': 'à¸ˆà¸³à¸™à¸§à¸™',
            '×˜×¨×§×˜×•×¨': 'à¸£à¸–à¹à¸—à¸£à¸à¹€à¸•à¸­à¸£à¹Œ',
            '×¢×•×‘×“×™× × ×•×¡×¤×™×': 'à¸à¸™à¸±à¸à¸‡à¸²à¸™à¹€à¸à¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡',
            '×”×¢×¨×•×ª': 'à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸',
            
            // ×¡×’×™×¨×”
            '×¦×¨×™×š ××©×”×•? ×ª×›×ª×•×‘!': 'à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸­à¸°à¹„à¸£à¹€à¸à¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡à¹„à¸«à¸¡? à¹‚à¸›à¸£à¸”à¹à¸ˆà¹‰à¸‡!',
            '×‘×”×¦×œ×—×”': 'à¹‚à¸Šà¸„à¸”à¸µ'
        };

        // × ×ª×•× ×™× ×”×ª×—×œ×ª×™×™×
        const INITIAL_DATA = {
            employees: [
                { name: "×˜×•×Ÿ", active: true },
                { name: "××¢×™×™×Ÿ", active: true },
                { name: "×‘××¡×", active: true },
                { name: "×¤×¨×™×¡", active: true },
                { name: "×”×“×©", active: true },
                { name: "× ×•×Ÿ", active: false },
            ],
            
            farms: ["××‘×•×§×“×• ×’×œ", "×’×’", "××˜×¢×™×", "×©××™×¨ ×‘×’×œ×™×œ", "×—×•×§×•×§", "×›×¤×¨ ×’×œ×¢×“×™", "×›×¤×¨ ×—×™×˜×™×", "×¨×¤×ª"],
            
            workTypes: ["×§×˜×™×£ ××‘×•×§×“×•", "×§×˜×™×£ ×× ×’×•", "×§×˜×™×£ ×œ×™×¦'×™", "×’×™×–×•×", "×—×¨×™×©×”", "×¨×™×¡×•×¡", "×—×œ×™×‘×”", "×“×™×©×•×Ÿ", "×–×¨×™×¢×”"],
            
            tractors: ["1400", "3036", "4430", "5105", "5115", "6215", "8280"],
            
            farmToPlots: {
                "××˜×¢×™×": ["××‘×•×§×“×• ×©×¨×”", "××‘×•×§×“×• ××¨×›×–", "×œ×™×¦'×™ ×¦×¤×•×Ÿ", "×× ×’×• ×“×¨×•×"],
                "×©××™×¨ ×‘×’×œ×™×œ": ["TOM-01", "AVO-SH-01", "MAN-SH-01", "LIT-SH-01"],
                "××‘×•×§×“×• ×’×œ": ["××‘×•×§×“×• ×©×¨×”", "××‘×•×§×“×• ×—×“×©"],
                "×—×•×§×•×§": ["AVO-CH-01", "MAN-CH-01"],
                "×›×¤×¨ ×’×œ×¢×“×™": ["1×", "1×‘", "2×"],
                "×›×¤×¨ ×—×™×˜×™×": ["×‘×‘×™×ª", "×’×“×© ×"],
                "×¨×¤×ª": ["×¨×¤×ª"],
            }
        };

        function WorkManagementApp() {
            const [currentDate, setCurrentDate] = useState(new Date().toISOString().split('T')[0]);
            const [tasks, setTasks] = useState([]);
            const [selectedTab, setSelectedTab] = useState('create');
            const [farmData, setFarmData] = useState(null);

            useEffect(() => {
                const savedData = localStorage.getItem('farm_data_v2');
                if (savedData) {
                    setFarmData(JSON.parse(savedData));
                } else {
                    setFarmData(INITIAL_DATA);
                    localStorage.setItem('farm_data_v2', JSON.stringify(INITIAL_DATA));
                }

                const savedTasks = localStorage.getItem('work_tasks_v2');
                if (savedTasks) {
                    setTasks(JSON.parse(savedTasks));
                }
            }, []);

            useEffect(() => {
                if (farmData) {
                    localStorage.setItem('farm_data_v2', JSON.stringify(farmData));
                }
            }, [farmData]);

            useEffect(() => {
                localStorage.setItem('work_tasks_v2', JSON.stringify(tasks));
            }, [tasks]);

            if (!farmData) {
                return <div className="flex items-center justify-center h-screen">
                    <div className="text-2xl">×˜×•×¢×Ÿ...</div>
                </div>;
            }

            const addTask = () => {
                const newTask = {
                    id: Date.now(),
                    date: currentDate,
                    employee: '',
                    farm: '',
                    workType: '',
                    plot: '',
                    amount: '',
                    notes: '',
                    tractor: '',
                    status: 'planned',
                    whatsappSent: false
                };
                setTasks([...tasks, newTask]);
            };

            const updateTask = (id, field, value) => {
                setTasks(tasks.map(task => 
                    task.id === id ? { ...task, [field]: value } : task
                ));
            };

            const deleteTask = (id) => {
                setTasks(tasks.filter(task => task.id !== id));
            };

            const duplicateTask = (task) => {
                const newTask = { ...task, id: Date.now(), employee: '', whatsappSent: false };
                setTasks([...tasks, newTask]);
            };

            const updateFarmData = (newData) => {
                setFarmData(newData);
            };

            const translateToThai = (text) => {
                let translated = text;
                
                // ×ª×¨×’×•× ××™×œ×™× ×‘×•×“×“×•×ª
                Object.entries(THAI_TRANSLATIONS).forEach(([hebrew, thai]) => {
                    translated = translated.replace(new RegExp(hebrew, 'g'), thai);
                });
                
                return translated;
            };

            const generateWhatsAppMessage = (task, inThai = false) => {
                const employee = task.employee || '[×¢×•×‘×“]';
                const workType = task.workType || '[×¤×¢×™×œ×•×ª]';
                const farm = task.farm || '[××©×§]';
                const plot = task.plot || '[×—×œ×§×”]';
                const amount = task.amount || '';
                const tractor = task.tractor || '';
                const notes = task.notes || '';

                const date = new Date(task.date);
                const dayName = date.toLocaleDateString('he-IL', { weekday: 'long' });
                const formattedDate = date.toLocaleDateString('he-IL', {
                    day: '2-digit',
                    month: '2-digit',
                    year: 'numeric'
                });

                if (inThai) {
                    // ×ª×¨×’×•× ××œ× ×œ×ª××™×œ× ×“×™×ª
                    const thaiDayName = THAI_TRANSLATIONS[dayName] || dayName;
                    
                    let message = `ğŸŒ… ${THAI_TRANSLATIONS['×‘×•×§×¨ ×˜×•×‘']} ${employee}!\n\n`;
                    message += `ğŸ“… ${THAI_TRANSLATIONS['×ª×•×›× ×™×ª ×”×¢×‘×•×“×” ×œ×™×•×']} ${thaiDayName} ${formattedDate}:\n\n`;
                    message += `âœ… ${workType}\n`;
                    message += `ğŸ¢ ${THAI_TRANSLATIONS['××©×§']}: ${farm}\n`;
                    message += `ğŸ“ ${THAI_TRANSLATIONS['×—×œ×§×”']}: ${plot}\n`;
                    if (amount) message += `ğŸ“ ${THAI_TRANSLATIONS['×›××•×ª']}: ${amount}\n`;
                    if (tractor) message += `ğŸšœ ${THAI_TRANSLATIONS['×˜×¨×§×˜×•×¨']}: ${tractor}\n`;
                    if (notes) message += `ğŸ’¬ ${notes}\n`;
                    message += `\n${THAI_TRANSLATIONS['×¦×¨×™×š ××©×”×•? ×ª×›×ª×•×‘!']}\n${THAI_TRANSLATIONS['×‘×”×¦×œ×—×”']} ğŸ’ª`;
                    
                    return message;
                }

                let message = `ğŸŒ… ×‘×•×§×¨ ×˜×•×‘ ${employee}!\n\n`;
                message += `ğŸ“… ×ª×•×›× ×™×ª ×”×¢×‘×•×“×” ×œ×™×•× ${dayName} ${formattedDate}:\n\n`;
                message += `âœ… ${workType}\n`;
                message += `ğŸ¢ ××©×§: ${farm}\n`;
                message += `ğŸ“ ×—×œ×§×”: ${plot}\n`;
                if (amount) message += `ğŸ“ ×›××•×ª: ${amount}\n`;
                if (tractor) message += `ğŸšœ ×˜×¨×§×˜×•×¨: ${tractor}\n`;
                if (notes) message += `ğŸ’¬ ${notes}\n`;
                message += `\n×¦×¨×™×š ××©×”×•? ×ª×›×ª×•×‘!\n×‘×”×¦×œ×—×” ğŸ’ª`;

                return message;
            };

            const copyToClipboard = (text, taskId) => {
                navigator.clipboard.writeText(text).then(() => {
                    updateTask(taskId, 'whatsappSent', true);
                    alert('×”×”×•×“×¢×” ×”×•×¢×ª×§×”! ğŸ“‹');
                });
            };

            const todayTasks = tasks.filter(task => task.date === currentDate);
            const tasksWithMessages = todayTasks.filter(task => task.employee && task.workType);
            const activeEmployees = farmData.employees.filter(emp => emp.active);
            const employeesWithoutTasks = activeEmployees.filter(emp => 
                !todayTasks.some(task => task.employee === emp.name)
            );

            return (
                <div className="min-h-screen p-4 md:p-8">
                    <div className="max-w-7xl mx-auto">
                        {/* Header */}
                        <div className="bg-white rounded-2xl shadow-2xl p-6 mb-6 fade-in">
                            <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                                <div>
                                    <h1 className="text-3xl font-bold text-gray-800 mb-2">
                                        ğŸŒ¾ ××¢×¨×›×ª × ×™×”×•×œ ×¢×•×‘×“×™×
                                    </h1>
                                    <p className="text-gray-600">×©××™×¨ ×‘×’×œ×™×œ - ×’×¨×¡×” 2.1 ××ª×•×§× ×ª</p>
                                </div>
                                <div className="flex items-center gap-4">
                                    <div className="bg-blue-50 px-6 py-3 rounded-xl">
                                        <label className="text-sm text-gray-600 block mb-1">×ª××¨×™×š</label>
                                        <input
                                            type="date"
                                            value={currentDate}
                                            onChange={(e) => setCurrentDate(e.target.value)}
                                            className="text-lg font-semibold text-blue-600 bg-transparent border-none focus:outline-none"
                                        />
                                    </div>
                                    <div className="bg-green-50 px-6 py-3 rounded-xl text-center">
                                        <div className="text-sm text-gray-600">××©×™××•×ª</div>
                                        <div className="text-2xl font-bold text-green-600">{todayTasks.length}</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Tabs */}
                        <div className="bg-white rounded-2xl shadow-xl mb-6 overflow-hidden">
                            <div className="flex overflow-x-auto">
                                <TabButton onClick={() => setSelectedTab('create')} selected={selectedTab === 'create'} label={`âœï¸ ××©×™××•×ª (${todayTasks.length})`} />
                                <TabButton onClick={() => setSelectedTab('messages')} selected={selectedTab === 'messages'} label={`ğŸ“± WhatsApp (${tasksWithMessages.length})`} />
                                <TabButton onClick={() => setSelectedTab('report')} selected={selectedTab === 'report'} label="ğŸ“Š ×“×•×—" />
                                <TabButton onClick={() => setSelectedTab('backoffice')} selected={selectedTab === 'backoffice'} label="âš™ï¸ × ×™×”×•×œ" />
                            </div>
                        </div>

                        {/* Content */}
                        {selectedTab === 'create' && (
                            <CreateTasksTab
                                tasks={todayTasks}
                                addTask={addTask}
                                updateTask={updateTask}
                                deleteTask={deleteTask}
                                duplicateTask={duplicateTask}
                                employeesWithoutTasks={employeesWithoutTasks}
                                farmData={farmData}
                            />
                        )}
                        
                        {selectedTab === 'messages' && (
                            <MessagesTab
                                tasks={tasksWithMessages}
                                generateWhatsAppMessage={generateWhatsAppMessage}
                                copyToClipboard={copyToClipboard}
                            />
                        )}
                        
                        {selectedTab === 'report' && (
                            <ReportTab tasks={todayTasks} currentDate={currentDate} />
                        )}
                        
                        {selectedTab === 'backoffice' && (
                            <BackofficeTab
                                farmData={farmData}
                                updateFarmData={updateFarmData}
                                tasks={tasks}
                                setTasks={setTasks}
                            />
                        )}
                    </div>
                </div>
            );
        }

        function TabButton({ onClick, selected, label }) {
            return (
                <button
                    onClick={onClick}
                    className={`flex-1 py-4 px-6 font-semibold transition-all whitespace-nowrap ${
                        selected ? 'bg-blue-500 text-white' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                    }`}
                >
                    {label}
                </button>
            );
        }

        function CreateTasksTab({ tasks, addTask, updateTask, deleteTask, duplicateTask, employeesWithoutTasks, farmData }) {
            return (
                <div className="space-y-6">
                    {employeesWithoutTasks.length > 0 && (
                        <div className="bg-orange-50 border-2 border-orange-200 rounded-xl p-6">
                            <h3 className="text-lg font-semibold text-orange-800 mb-3">
                                âš ï¸ ×¢×•×‘×“×™× ×¤×¢×™×œ×™× ×œ×œ× ××©×™××” ({employeesWithoutTasks.length})
                            </h3>
                            <div className="flex flex-wrap gap-2">
                                {employeesWithoutTasks.map(emp => (
                                    <span key={emp.name} className="bg-white px-3 py-1 rounded-full text-sm shadow-sm">
                                        {emp.name}
                                    </span>
                                ))}
                            </div>
                        </div>
                    )}

                    <button
                        onClick={addTask}
                        className="w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white font-semibold py-4 px-6 rounded-xl shadow-lg hover:shadow-xl transition-all"
                    >
                        â• ×”×•×¡×£ ××©×™××” ×—×“×©×”
                    </button>

                    <div className="space-y-4">
                        {tasks.length === 0 ? (
                            <div className="bg-white rounded-xl p-12 text-center shadow-lg">
                                <div className="text-6xl mb-4">ğŸ“‹</div>
                                <h3 className="text-xl font-semibold text-gray-800 mb-2">××™×Ÿ ××©×™××•×ª</h3>
                                <p className="text-gray-600">×œ×—×¥ "×”×•×¡×£ ××©×™××”" ×œ×”×ª×—×™×œ</p>
                            </div>
                        ) : (
                            tasks.map((task, index) => (
                                <TaskCard
                                    key={task.id}
                                    task={task}
                                    index={index}
                                    updateTask={updateTask}
                                    deleteTask={deleteTask}
                                    duplicateTask={duplicateTask}
                                    farmData={farmData}
                                />
                            ))
                        )}
                    </div>
                </div>
            );
        }

        function TaskCard({ task, index, updateTask, deleteTask, duplicateTask, farmData }) {
            const selectedFarmPlots = task.farm && farmData.farmToPlots[task.farm] ? farmData.farmToPlots[task.farm] : [];

            return (
                <div className="bg-white rounded-xl shadow-lg p-6 border-r-4 border-blue-400">
                    <div className="flex items-center justify-between mb-4">
                        <div className="flex items-center gap-3">
                            <div className="bg-blue-100 text-blue-600 font-bold w-10 h-10 rounded-full flex items-center justify-center">
                                {index + 1}
                            </div>
                            <h3 className="text-lg font-semibold">××©×™××” #{index + 1}</h3>
                        </div>
                        <div className="flex gap-2">
                            <button onClick={() => duplicateTask(task)} className="px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm">ğŸ“‹</button>
                            <button onClick={() => deleteTask(task.id)} className="px-3 py-1 bg-red-100 hover:bg-red-200 text-red-600 rounded-lg text-sm">ğŸ—‘ï¸</button>
                        </div>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <div>
                            <label className="block text-sm font-medium mb-1">ğŸ‘¤ ×¢×•×‘×“</label>
                            <select
                                value={task.employee}
                                onChange={(e) => updateTask(task.id, 'employee', e.target.value)}
                                className="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
                            >
                                <option value="">×‘×—×¨ ×¢×•×‘×“</option>
                                {farmData.employees.map(emp => (
                                    <option key={emp.name} value={emp.name}>{emp.name}</option>
                                ))}
                            </select>
                        </div>

                        <div>
                            <label className="block text-sm font-medium mb-1">ğŸ¢ ××©×§</label>
                            <select
                                value={task.farm}
                                onChange={(e) => updateTask(task.id, 'farm', e.target.value)}
                                className="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
                            >
                                <option value="">×‘×—×¨ ××©×§</option>
                                {farmData.farms.map(farm => (
                                    <option key={farm} value={farm}>{farm}</option>
                                ))}
                            </select>
                        </div>

                        <div>
                            <label className="block text-sm font-medium mb-1">âš™ï¸ ×¡×•×’ ×¢×‘×•×“×”</label>
                            <select
                                value={task.workType}
                                onChange={(e) => updateTask(task.id, 'workType', e.target.value)}
                                className="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
                            >
                                <option value="">×‘×—×¨ ×¢×‘×•×“×”</option>
                                {farmData.workTypes.map(wt => (
                                    <option key={wt} value={wt}>{wt}</option>
                                ))}
                            </select>
                        </div>

                        <div>
                            <label className="block text-sm font-medium mb-1">ğŸ“ ×—×œ×§×”</label>
                            {selectedFarmPlots.length > 0 ? (
                                <select
                                    value={task.plot}
                                    onChange={(e) => updateTask(task.id, 'plot', e.target.value)}
                                    className="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
                                >
                                    <option value="">×‘×—×¨ ×—×œ×§×”</option>
                                    {selectedFarmPlots.map(plot => (
                                        <option key={plot} value={plot}>{plot}</option>
                                    ))}
                                </select>
                            ) : (
                                <input
                                    type="text"
                                    value={task.plot}
                                    onChange={(e) => updateTask(task.id, 'plot', e.target.value)}
                                    placeholder="×”×§×œ×“ ×—×œ×§×”"
                                    className="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
                                />
                            )}
                        </div>

                        <div>
                            <label className="block text-sm font-medium mb-1">ğŸ“ ×›××•×ª</label>
                            <input
                                type="text"
                                value={task.amount}
                                onChange={(e) => updateTask(task.id, 'amount', e.target.value)}
                                placeholder="7 ×“×•× ×"
                                className="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
                            />
                        </div>

                        <div>
                            <label className="block text-sm font-medium mb-1">ğŸšœ ×˜×¨×§×˜×•×¨</label>
                            <select
                                value={task.tractor}
                                onChange={(e) => updateTask(task.id, 'tractor', e.target.value)}
                                className="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
                            >
                                <option value="">×‘×—×¨ ×˜×¨×§×˜×•×¨</option>
                                {farmData.tractors.map(tractor => (
                                    <option key={tractor} value={tractor}>{tractor}</option>
                                ))}
                            </select>
                        </div>

                        <div className="md:col-span-2 lg:col-span-3">
                            <label className="block text-sm font-medium mb-1">ğŸ’¬ ×”×¢×¨×•×ª</label>
                            <input
                                type="text"
                                value={task.notes}
                                onChange={(e) => updateTask(task.id, 'notes', e.target.value)}
                                placeholder="×§×˜×™×£ ×‘0630"
                                className="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
                            />
                        </div>
                    </div>
                </div>
            );
        }

        function MessagesTab({ tasks, generateWhatsAppMessage, copyToClipboard }) {
            const [showThaiModal, setShowThaiModal] = useState(false);
            const [selectedTask, setSelectedTask] = useState(null);

            const sentCount = tasks.filter(t => t.whatsappSent).length;

            return (
                <div className="space-y-6">
                    {showThaiModal && selectedTask && (
                        <div className="fixed inset-0 z-50 flex items-center justify-center modal-overlay">
                            <div className="bg-white rounded-2xl p-8 max-w-2xl w-full mx-4 shadow-2xl">
                                <div className="flex items-center justify-between mb-6">
                                    <h2 className="text-2xl font-bold">ğŸ‡¹ğŸ‡­ ×ª×¨×’×•× ×œ×ª××™×œ× ×“×™×ª</h2>
                                    <button onClick={() => setShowThaiModal(false)} className="text-gray-500 hover:text-gray-700 text-2xl">Ã—</button>
                                </div>
                                
                                <div className="space-y-4">
                                    <div className="bg-blue-50 border-2 border-blue-200 rounded-xl p-4">
                                        <h3 className="font-semibold mb-2">ğŸ‡®ğŸ‡± ×¢×‘×¨×™×ª:</h3>
                                        <pre className="whitespace-pre-wrap font-sans text-sm">{generateWhatsAppMessage(selectedTask, false)}</pre>
                                    </div>

                                    <div className="bg-green-50 border-2 border-green-200 rounded-xl p-4">
                                        <h3 className="font-semibold mb-2">ğŸ‡¹ğŸ‡­ ×ª××™×œ× ×“×™×ª:</h3>
                                        <pre className="whitespace-pre-wrap font-sans text-sm">{generateWhatsAppMessage(selectedTask, true)}</pre>
                                    </div>

                                    <div className="flex gap-3">
                                        <button
                                            onClick={() => {
                                                copyToClipboard(generateWhatsAppMessage(selectedTask, true), selectedTask.id);
                                                setShowThaiModal(false);
                                            }}
                                            className="flex-1 bg-green-500 text-white py-3 rounded-xl font-semibold hover:bg-green-600"
                                        >
                                            ğŸ“± ×”×¢×ª×§ ×‘×ª××™×œ× ×“×™×ª
                                        </button>
                                        <button onClick={() => setShowThaiModal(false)} className="px-6 py-3 bg-gray-200 rounded-xl font-semibold hover:bg-gray-300">×‘×™×˜×•×œ</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div className="bg-blue-50 rounded-xl p-6 text-center">
                            <div className="text-3xl font-bold text-blue-600">{tasks.length}</div>
                            <div className="text-gray-600 mt-1">×¡×”"×› ×”×•×“×¢×•×ª</div>
                        </div>
                        <div className="bg-green-50 rounded-xl p-6 text-center">
                            <div className="text-3xl font-bold text-green-600">{sentCount}</div>
                            <div className="text-gray-600 mt-1">× ×©×œ×—×•</div>
                        </div>
                    </div>

                    <div className="space-y-4">
                        {tasks.length === 0 ? (
                            <div className="bg-white rounded-xl p-12 text-center shadow-lg">
                                <div className="text-6xl mb-4">ğŸ“±</div>
                                <h3 className="text-xl font-semibold mb-2">××™×Ÿ ×”×•×“×¢×•×ª</h3>
                                <p className="text-gray-600">×¦×•×¨ ××©×™××•×ª ×›×“×™ ×œ×¨××•×ª ×”×•×“×¢×•×ª</p>
                            </div>
                        ) : (
                            tasks.map((task, index) => {
                                const message = generateWhatsAppMessage(task);
                                return (
                                    <div key={task.id} className={`bg-white rounded-xl shadow-lg p-6 border-r-4 ${task.whatsappSent ? 'border-green-400' : 'border-orange-400'}`}>
                                        <div className="flex items-center justify-between mb-4">
                                            <div className="flex items-center gap-3">
                                                <div className={`w-10 h-10 rounded-full flex items-center justify-center font-bold ${task.whatsappSent ? 'bg-green-100 text-green-600' : 'bg-orange-100 text-orange-600'}`}>
                                                    {index + 1}
                                                </div>
                                                <div>
                                                    <h3 className="text-lg font-semibold">{task.employee || '×œ× ×¦×•×™×Ÿ'}</h3>
                                                    <p className="text-sm text-gray-500">{task.whatsappSent ? 'âœ… × ×©×œ×—' : 'â³ ×××ª×™×Ÿ'}</p>
                                                </div>
                                            </div>
                                            <div className="flex gap-2">
                                                <button
                                                    onClick={() => { setSelectedTask(task); setShowThaiModal(true); }}
                                                    className="px-4 py-2 bg-purple-100 text-purple-600 rounded-xl font-semibold hover:bg-purple-200"
                                                >
                                                    ğŸ‡¹ğŸ‡­ ×ª××™×œ× ×“×™×ª
                                                </button>
                                                <button
                                                    onClick={() => copyToClipboard(message, task.id)}
                                                    className={`px-6 py-3 rounded-xl font-semibold ${task.whatsappSent ? 'bg-green-100 text-green-600' : 'bg-green-500 text-white hover:bg-green-600'}`}
                                                >
                                                    {task.whatsappSent ? 'ğŸ“‹ ×”×¢×ª×§ ×©×•×‘' : 'ğŸ“± ×”×¢×ª×§ ×•×©×œ×—'}
                                                </button>
                                            </div>
                                        </div>

                                        <div className="bg-green-50 border-2 border-green-200 rounded-xl p-4">
                                            <pre className="whitespace-pre-wrap font-sans text-sm leading-relaxed">{message}</pre>
                                        </div>
                                    </div>
                                );
                            })
                        )}
                    </div>
                </div>
            );
        }

        function ReportTab({ tasks, currentDate }) {
            return (
                <div className="bg-white rounded-xl shadow-lg p-6">
                    <h2 className="text-2xl font-bold mb-4">ğŸ“Š ×“×•×— ×™×•××™</h2>
                    <div className="text-gray-600">
                        {tasks.length} ××©×™××•×ª ×œ×™×•× {new Date(currentDate).toLocaleDateString('he-IL')}
                    </div>
                </div>
            );
        }

        function BackofficeTab({ farmData, updateFarmData }) {
            const [newEmployee, setNewEmployee] = useState('');

            const addEmployee = () => {
                if (!newEmployee.trim()) return;
                const updated = {
                    ...farmData,
                    employees: [...farmData.employees, { name: newEmployee.trim(), active: true }]
                };
                updateFarmData(updated);
                setNewEmployee('');
            };

            const toggleEmployee = (name) => {
                const updated = {
                    ...farmData,
                    employees: farmData.employees.map(emp =>
                        emp.name === name ? { ...emp, active: !emp.active } : emp
                    )
                };
                updateFarmData(updated);
            };

            return (
                <div className="space-y-6">
                    <div className="bg-white rounded-xl shadow-lg p-6">
                        <h2 className="text-2xl font-bold mb-4">âš™ï¸ × ×™×”×•×œ × ×ª×•× ×™×</h2>
                        
                        <h3 className="text-xl font-bold mb-4 mt-6">ğŸ‘¥ ×¢×•×‘×“×™×</h3>
                        <div className="flex gap-3 mb-4">
                            <input
                                type="text"
                                value={newEmployee}
                                onChange={(e) => setNewEmployee(e.target.value)}
                                placeholder="×©× ×¢×•×‘×“ ×—×“×©"
                                className="flex-1 px-4 py-2 border rounded-lg"
                                onKeyPress={(e) => e.key === 'Enter' && addEmployee()}
                            />
                            <button onClick={addEmployee} className="bg-blue-500 text-white px-6 py-2 rounded-lg font-semibold">â• ×”×•×¡×£</button>
                        </div>

                        <div className="space-y-2">
                            {farmData.employees.map(emp => (
                                <div key={emp.name} className={`flex items-center justify-between p-3 rounded-lg border-2 ${emp.active ? 'bg-green-50 border-green-200' : 'bg-gray-50 border-gray-200'}`}>
                                    <span className="font-semibold">{emp.name}</span>
                                    <button
                                        onClick={() => toggleEmployee(emp.name)}
                                        className={`px-3 py-1 rounded-lg text-sm ${emp.active ? 'bg-red-100 text-red-600' : 'bg-green-100 text-green-600'}`}
                                    >
                                        {emp.active ? 'ğŸ”´ ×”×©×‘×ª' : 'ğŸŸ¢ ×”×¤×¢×œ'}
                                    </button>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<WorkManagementApp />, document.getElementById('root'));
    </script>
</body>
</html>
