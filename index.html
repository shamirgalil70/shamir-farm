<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>××¢×¨×›×ª × ×™×”×•×œ ×¢×•×‘×“×™× - ×©××™×¨ ×‘×’×œ×™×œ</title>
    
    <!-- ×˜×¢×™× ×ª × ×ª×•× ×™× ××œ××™× -->
    <script src="farm-data.js"></script>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Heebo', sans-serif; }
        .custom-scrollbar::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 10px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #888; border-radius: 10px; }
        .fade-in { animation: fadeIn 0.3s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .pulse-green { animation: pulseGreen 2s infinite; }
        @keyframes pulseGreen { 0%, 100% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7); } 50% { box-shadow: 0 0 0 10px rgba(34, 197, 94, 0); } }
        .modal-overlay { background: rgba(0, 0, 0, 0.5); backdrop-filter: blur(4px); }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-green-50 min-h-screen">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // ×˜×¢×™× ×ª × ×ª×•× ×™× ××œ××™×
        const INITIAL_DATA = window.SHAMIR_FULL_DATA || {
            employees: [{name: "×©×’×™××”", active: true}],
            farms: ["×©×’×™××” ×‘×˜×¢×™× ×ª × ×ª×•× ×™×"],
            workTypes: ["×‘×“×•×§ ×©×”×§×•×‘×¥ farm-data.js ×§×™×™×"],
            tractors: [],
            farmToPlots: {}
        };

        // ××™×œ×•×Ÿ ×ª×¨×’×•× ×œ×ª××™×œ× ×“×™×ª
        const THAI_TRANSLATIONS = {
            '×¨××©×•×Ÿ': 'à¸§à¸±à¸™à¸­à¸²à¸—à¸´à¸•à¸¢à¹Œ', '×©× ×™': 'à¸§à¸±à¸™à¸ˆà¸±à¸™à¸—à¸£à¹Œ', '×©×œ×™×©×™': 'à¸§à¸±à¸™à¸­à¸±à¸‡à¸„à¸²à¸£', '×¨×‘×™×¢×™': 'à¸§à¸±à¸™à¸à¸¸à¸˜',
            '×—××™×©×™': 'à¸§à¸±à¸™à¸à¸¤à¸«à¸±à¸ªà¸šà¸”à¸µ', '×©×™×©×™': 'à¸§à¸±à¸™à¸¨à¸¸à¸à¸£à¹Œ', '×©×‘×ª': 'à¸§à¸±à¸™à¹€à¸ªà¸²à¸£à¹Œ',
            '×‘×•×§×¨ ×˜×•×‘': 'à¸ªà¸§à¸±à¸ªà¸”à¸µà¸•à¸­à¸™à¹€à¸Šà¹‰à¸²', '×ª×•×›× ×™×ª ×”×¢×‘×•×“×” ×œ×™×•×': 'à¹à¸œà¸™à¸à¸²à¸£à¸—à¹à¸²à¸‡à¸²à¸™à¸§à¸±à¸™à¸—à¸µà¹ˆ',
            '××©×§': 'à¸Ÿà¸²à¸£à¹Œà¸¡', '×—×œ×§×”': 'à¹à¸›à¸¥à¸‡', '×›××•×ª': 'à¸ˆà¸³à¸™à¸§à¸™', '×˜×¨×§×˜×•×¨': 'à¸£à¸–à¹à¸—à¸£à¸à¹€à¸•à¸­à¸£à¹Œ',
            '×¦×¨×™×š ××©×”×•? ×ª×›×ª×•×‘!': 'à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸­à¸°à¹„à¸£à¹€à¸à¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡à¹„à¸«à¸¡? à¹‚à¸›à¸£à¸”à¹à¸ˆà¹‰à¸‡!', '×‘×”×¦×œ×—×”': 'à¹‚à¸Šà¸„à¸”à¸µ'
        };

        function WorkManagementApp() {
            const [currentDate, setCurrentDate] = useState(new Date().toISOString().split('T')[0]);
            const [tasks, setTasks] = useState([]);
            const [selectedTab, setSelectedTab] = useState('create');
            const [farmData, setFarmData] = useState(null);

            useEffect(() => {
                const saved = localStorage.getItem('farm_data_v2');
                setFarmData(saved ? JSON.parse(saved) : INITIAL_DATA);
                const savedTasks = localStorage.getItem('work_tasks_v2');
                if (savedTasks) setTasks(JSON.parse(savedTasks));
            }, []);

            useEffect(() => {
                if (farmData) localStorage.setItem('farm_data_v2', JSON.stringify(farmData));
            }, [farmData]);

            useEffect(() => {
                localStorage.setItem('work_tasks_v2', JSON.stringify(tasks));
            }, [tasks]);

            if (!farmData) return <div className="flex items-center justify-center h-screen"><div className="text-2xl">×˜×•×¢×Ÿ...</div></div>;

            const addTask = () => setTasks([...tasks, {
                id: Date.now(), date: currentDate, employee: '', farm: '', workType: '', plot: '', amount: '', notes: '', tractor: '', status: 'planned', whatsappSent: false
            }]);

            const updateTask = (id, field, value) => setTasks(tasks.map(t => t.id === id ? { ...t, [field]: value } : t));
            const deleteTask = (id) => setTasks(tasks.filter(t => t.id !== id));
            const duplicateTask = (task) => setTasks([...tasks, { ...task, id: Date.now(), employee: '', whatsappSent: false }]);
            const updateFarmData = (newData) => setFarmData(newData);

            const generateWhatsAppMessage = (task, inThai = false) => {
                const employee = task.employee || '[×¢×•×‘×“]';
                const date = new Date(task.date);
                const dayName = date.toLocaleDateString('he-IL', { weekday: 'long' });
                const formatted = date.toLocaleDateString('he-IL', { day: '2-digit', month: '2-digit', year: 'numeric' });

                if (inThai) {
                    const thaiDay = THAI_TRANSLATIONS[dayName] || dayName;
                    let msg = `ğŸŒ… ${THAI_TRANSLATIONS['×‘×•×§×¨ ×˜×•×‘']} ${employee}!\n\n`;
                    msg += `ğŸ“… ${THAI_TRANSLATIONS['×ª×•×›× ×™×ª ×”×¢×‘×•×“×” ×œ×™×•×']} ${thaiDay} ${formatted}:\n\n`;
                    msg += `âœ… ${task.workType || ''}\n`;
                    msg += `ğŸ¢ ${THAI_TRANSLATIONS['××©×§']}: ${task.farm || ''}\n`;
                    msg += `ğŸ“ ${THAI_TRANSLATIONS['×—×œ×§×”']}: ${task.plot || ''}\n`;
                    if (task.amount) msg += `ğŸ“ ${THAI_TRANSLATIONS['×›××•×ª']}: ${task.amount}\n`;
                    if (task.tractor) msg += `ğŸšœ ${THAI_TRANSLATIONS['×˜×¨×§×˜×•×¨']}: ${task.tractor}\n`;
                    if (task.notes) msg += `ğŸ’¬ ${task.notes}\n`;
                    msg += `\n${THAI_TRANSLATIONS['×¦×¨×™×š ××©×”×•? ×ª×›×ª×•×‘!']}\n${THAI_TRANSLATIONS['×‘×”×¦×œ×—×”']} ğŸ’ª`;
                    return msg;
                }

                let msg = `ğŸŒ… ×‘×•×§×¨ ×˜×•×‘ ${employee}!\n\n`;
                msg += `ğŸ“… ×ª×•×›× ×™×ª ×”×¢×‘×•×“×” ×œ×™×•× ${dayName} ${formatted}:\n\n`;
                msg += `âœ… ${task.workType || ''}\n`;
                msg += `ğŸ¢ ××©×§: ${task.farm || ''}\n`;
                msg += `ğŸ“ ×—×œ×§×”: ${task.plot || ''}\n`;
                if (task.amount) msg += `ğŸ“ ×›××•×ª: ${task.amount}\n`;
                if (task.tractor) msg += `ğŸšœ ×˜×¨×§×˜×•×¨: ${task.tractor}\n`;
                if (task.notes) msg += `ğŸ’¬ ${task.notes}\n`;
                msg += `\n×¦×¨×™×š ××©×”×•? ×ª×›×ª×•×‘!\n×‘×”×¦×œ×—×” ğŸ’ª`;
                return msg;
            };

            const copyToClipboard = (text, taskId) => {
                navigator.clipboard.writeText(text).then(() => {
                    updateTask(taskId, 'whatsappSent', true);
                    alert('×”×”×•×“×¢×” ×”×•×¢×ª×§×”! ğŸ“‹');
                });
            };

            const todayTasks = tasks.filter(t => t.date === currentDate);
            const tasksWithMessages = todayTasks.filter(t => t.employee && t.workType);
            const activeEmployees = farmData.employees.filter(e => e.active);
            const employeesWithoutTasks = activeEmployees.filter(e => !todayTasks.some(t => t.employee === e.name));

            return (
                <div className="min-h-screen p-4 md:p-8">
                    <div className="max-w-7xl mx-auto">
                        <Header currentDate={currentDate} setCurrentDate={setCurrentDate} taskCount={todayTasks.length} employeeCount={farmData.employees.length} />
                        <Tabs selectedTab={selectedTab} setSelectedTab={setSelectedTab} todayTasks={todayTasks} tasksWithMessages={tasksWithMessages} />
                        
                        {selectedTab === 'create' && <CreateTasksTab tasks={todayTasks} addTask={addTask} updateTask={updateTask} deleteTask={deleteTask} duplicateTask={duplicateTask} employeesWithoutTasks={employeesWithoutTasks} farmData={farmData} />}
                        {selectedTab === 'messages' && <MessagesTab tasks={tasksWithMessages} generateWhatsAppMessage={generateWhatsAppMessage} copyToClipboard={copyToClipboard} />}
                        {selectedTab === 'report' && <ReportTab tasks={todayTasks} currentDate={currentDate} />}
                        {selectedTab === 'backoffice' && <BackofficeTab farmData={farmData} updateFarmData={updateFarmData} tasks={tasks} setTasks={setTasks} />}
                    </div>
                </div>
            );
        }

        function Header({ currentDate, setCurrentDate, taskCount, employeeCount }) {
            return (
                <div className="bg-white rounded-2xl shadow-2xl p-6 mb-6 fade-in">
                    <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                        <div>
                            <h1 className="text-3xl font-bold text-gray-800 mb-2">ğŸŒ¾ ××¢×¨×›×ª × ×™×”×•×œ ×¢×•×‘×“×™×</h1>
                            <p className="text-gray-600">×©××™×¨ ×‘×’×œ×™×œ â€¢ {employeeCount} ×¢×•×‘×“×™× ×‘××¢×¨×›×ª</p>
                        </div>
                        <div className="flex items-center gap-4">
                            <div className="bg-blue-50 px-6 py-3 rounded-xl">
                                <label className="text-sm text-gray-600 block mb-1">×ª××¨×™×š</label>
                                <input type="date" value={currentDate} onChange={(e) => setCurrentDate(e.target.value)} className="text-lg font-semibold text-blue-600 bg-transparent border-none focus:outline-none" />
                            </div>
                            <div className="bg-green-50 px-6 py-3 rounded-xl text-center">
                                <div className="text-sm text-gray-600">××©×™××•×ª</div>
                                <div className="text-2xl font-bold text-green-600">{taskCount}</div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        function Tabs({ selectedTab, setSelectedTab, todayTasks, tasksWithMessages }) {
            const Tab = ({id, label}) => (
                <button onClick={() => setSelectedTab(id)} className={`flex-1 py-4 px-6 font-semibold transition-all whitespace-nowrap ${selectedTab === id ? 'bg-blue-500 text-white' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'}`}>{label}</button>
            );
            return (
                <div className="bg-white rounded-2xl shadow-xl mb-6 overflow-hidden">
                    <div className="flex overflow-x-auto">
                        <Tab id="create" label={`âœï¸ ××©×™××•×ª (${todayTasks.length})`} />
                        <Tab id="messages" label={`ğŸ“± WhatsApp (${tasksWithMessages.length})`} />
                        <Tab id="report" label="ğŸ“Š ×“×•×—" />
                        <Tab id="backoffice" label="âš™ï¸ × ×™×”×•×œ" />
                    </div>
                </div>
            );
        }

        function CreateTasksTab({ tasks, addTask, updateTask, deleteTask, duplicateTask, employeesWithoutTasks, farmData }) {
            return (
                <div className="space-y-6">
                    {employeesWithoutTasks.length > 0 && (
                        <div className="bg-orange-50 border-2 border-orange-200 rounded-xl p-6">
                            <h3 className="text-lg font-semibold text-orange-800 mb-3">âš ï¸ ×¢×•×‘×“×™× ×¤×¢×™×œ×™× ×œ×œ× ××©×™××” ({employeesWithoutTasks.length})</h3>
                            <div className="flex flex-wrap gap-2">
                                {employeesWithoutTasks.slice(0,20).map(e => <span key={e.name} className="bg-white px-3 py-1 rounded-full text-sm shadow-sm">{e.name}</span>)}
                                {employeesWithoutTasks.length > 20 && <span className="text-sm px-3 py-1">×•×¢×•×“ {employeesWithoutTasks.length - 20}...</span>}
                            </div>
                        </div>
                    )}
                    <button onClick={addTask} className="w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white font-semibold py-4 px-6 rounded-xl shadow-lg hover:shadow-xl transition-all">â• ×”×•×¡×£ ××©×™××” ×—×“×©×”</button>
                    <div className="space-y-4">
                        {tasks.length === 0 ? (
                            <div className="bg-white rounded-xl p-12 text-center shadow-lg">
                                <div className="text-6xl mb-4">ğŸ“‹</div>
                                <h3 className="text-xl font-semibold text-gray-800 mb-2">××™×Ÿ ××©×™××•×ª</h3>
                                <p className="text-gray-600">×œ×—×¥ "×”×•×¡×£ ××©×™××”" ×œ×”×ª×—×™×œ</p>
                            </div>
                        ) : (
                            tasks.map((task, idx) => <TaskCard key={task.id} task={task} index={idx} updateTask={updateTask} deleteTask={deleteTask} duplicateTask={duplicateTask} farmData={farmData} />)
                        )}
                    </div>
                </div>
            );
        }

        function TaskCard({ task, index, updateTask, deleteTask, duplicateTask, farmData }) {
            const plots = task.farm && farmData.farmToPlots[task.farm] ? farmData.farmToPlots[task.farm] : [];
            return (
                <div className="bg-white rounded-xl shadow-lg p-6 border-r-4 border-blue-400">
                    <div className="flex items-center justify-between mb-4">
                        <div className="flex items-center gap-3">
                            <div className="bg-blue-100 text-blue-600 font-bold w-10 h-10 rounded-full flex items-center justify-center">{index + 1}</div>
                            <h3 className="text-lg font-semibold">××©×™××” #{index + 1}</h3>
                        </div>
                        <div className="flex gap-2">
                            <button onClick={() => duplicateTask(task)} className="px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm">ğŸ“‹</button>
                            <button onClick={() => deleteTask(task.id)} className="px-3 py-1 bg-red-100 hover:bg-red-200 text-red-600 rounded-lg text-sm">ğŸ—‘ï¸</button>
                        </div>
                    </div>
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <Select label="ğŸ‘¤ ×¢×•×‘×“" value={task.employee} onChange={(e) => updateTask(task.id, 'employee', e.target.value)} options={farmData.employees.map(e => e.name)} />
                        <Select label="ğŸ¢ ××©×§" value={task.farm} onChange={(e) => updateTask(task.id, 'farm', e.target.value)} options={farmData.farms} />
                        <Select label="âš™ï¸ ×¡×•×’ ×¢×‘×•×“×”" value={task.workType} onChange={(e) => updateTask(task.id, 'workType', e.target.value)} options={farmData.workTypes} />
                        {plots.length > 0 ? <Select label="ğŸ“ ×—×œ×§×”" value={task.plot} onChange={(e) => updateTask(task.id, 'plot', e.target.value)} options={plots} /> : <Input label="ğŸ“ ×—×œ×§×”" value={task.plot} onChange={(e) => updateTask(task.id, 'plot', e.target.value)} placeholder="×”×§×œ×“ ×—×œ×§×”" />}
                        <Input label="ğŸ“ ×›××•×ª" value={task.amount} onChange={(e) => updateTask(task.id, 'amount', e.target.value)} placeholder="7 ×“×•× ×" />
                        <Select label="ğŸšœ ×˜×¨×§×˜×•×¨" value={task.tractor} onChange={(e) => updateTask(task.id, 'tractor', e.target.value)} options={farmData.tractors} />
                        <div className="md:col-span-2 lg:col-span-3">
                            <Input label="ğŸ’¬ ×”×¢×¨×•×ª" value={task.notes} onChange={(e) => updateTask(task.id, 'notes', e.target.value)} placeholder="×§×˜×™×£ ×‘0630" />
                        </div>
                    </div>
                </div>
            );
        }

        function Select({ label, value, onChange, options }) {
            return (
                <div>
                    <label className="block text-sm font-medium mb-1">{label}</label>
                    <select value={value} onChange={onChange} className="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        <option value="">×‘×—×¨</option>
                        {options.map(opt => <option key={opt} value={opt}>{opt}</option>)}
                    </select>
                </div>
            );
        }

        function Input({ label, value, onChange, placeholder }) {
            return (
                <div>
                    <label className="block text-sm font-medium mb-1">{label}</label>
                    <input type="text" value={value} onChange={onChange} placeholder={placeholder} className="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500" />
                </div>
            );
        }

        function MessagesTab({ tasks, generateWhatsAppMessage, copyToClipboard }) {
            const [showModal, setShowModal] = useState(false);
            const [selectedTask, setSelectedTask] = useState(null);
            const sent = tasks.filter(t => t.whatsappSent).length;

            return (
                <div className="space-y-6">
                    {showModal && selectedTask && (
                        <div className="fixed inset-0 z-50 flex items-center justify-center modal-overlay">
                            <div className="bg-white rounded-2xl p-8 max-w-2xl w-full mx-4 shadow-2xl">
                                <div className="flex items-center justify-between mb-6">
                                    <h2 className="text-2xl font-bold">ğŸ‡¹ğŸ‡­ ×ª×¨×’×•× ×œ×ª××™×œ× ×“×™×ª</h2>
                                    <button onClick={() => setShowModal(false)} className="text-gray-500 hover:text-gray-700 text-2xl">Ã—</button>
                                </div>
                                <div className="space-y-4">
                                    <div className="bg-blue-50 border-2 border-blue-200 rounded-xl p-4">
                                        <h3 className="font-semibold mb-2">ğŸ‡®ğŸ‡± ×¢×‘×¨×™×ª:</h3>
                                        <pre className="whitespace-pre-wrap font-sans text-sm">{generateWhatsAppMessage(selectedTask, false)}</pre>
                                    </div>
                                    <div className="bg-green-50 border-2 border-green-200 rounded-xl p-4">
                                        <h3 className="font-semibold mb-2">ğŸ‡¹ğŸ‡­ ×ª××™×œ× ×“×™×ª:</h3>
                                        <pre className="whitespace-pre-wrap font-sans text-sm">{generateWhatsAppMessage(selectedTask, true)}</pre>
                                    </div>
                                    <div className="flex gap-3">
                                        <button onClick={() => { copyToClipboard(generateWhatsAppMessage(selectedTask, true), selectedTask.id); setShowModal(false); }} className="flex-1 bg-green-500 text-white py-3 rounded-xl font-semibold hover:bg-green-600">ğŸ“± ×”×¢×ª×§ ×‘×ª××™×œ× ×“×™×ª</button>
                                        <button onClick={() => setShowModal(false)} className="px-6 py-3 bg-gray-200 rounded-xl font-semibold hover:bg-gray-300">×‘×™×˜×•×œ</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div className="bg-blue-50 rounded-xl p-6 text-center">
                            <div className="text-3xl font-bold text-blue-600">{tasks.length}</div>
                            <div className="text-gray-600 mt-1">×¡×”"×› ×”×•×“×¢×•×ª</div>
                        </div>
                        <div className="bg-green-50 rounded-xl p-6 text-center">
                            <div className="text-3xl font-bold text-green-600">{sent}</div>
                            <div className="text-gray-600 mt-1">× ×©×œ×—×•</div>
                        </div>
                    </div>
                    <div className="space-y-4">
                        {tasks.length === 0 ? (
                            <div className="bg-white rounded-xl p-12 text-center shadow-lg">
                                <div className="text-6xl mb-4">ğŸ“±</div>
                                <h3 className="text-xl font-semibold mb-2">××™×Ÿ ×”×•×“×¢×•×ª</h3>
                            </div>
                        ) : (
                            tasks.map((task, idx) => {
                                const msg = generateWhatsAppMessage(task);
                                return (
                                    <div key={task.id} className={`bg-white rounded-xl shadow-lg p-6 border-r-4 ${task.whatsappSent ? 'border-green-400' : 'border-orange-400'}`}>
                                        <div className="flex items-center justify-between mb-4">
                                            <div className="flex items-center gap-3">
                                                <div className={`w-10 h-10 rounded-full flex items-center justify-center font-bold ${task.whatsappSent ? 'bg-green-100 text-green-600' : 'bg-orange-100 text-orange-600'}`}>{idx + 1}</div>
                                                <div>
                                                    <h3 className="text-lg font-semibold">{task.employee || '×œ× ×¦×•×™×Ÿ'}</h3>
                                                    <p className="text-sm text-gray-500">{task.whatsappSent ? 'âœ… × ×©×œ×—' : 'â³ ×××ª×™×Ÿ'}</p>
                                                </div>
                                            </div>
                                            <div className="flex gap-2">
                                                <button onClick={() => { setSelectedTask(task); setShowModal(true); }} className="px-4 py-2 bg-purple-100 text-purple-600 rounded-xl font-semibold hover:bg-purple-200">ğŸ‡¹ğŸ‡­</button>
                                                <button onClick={() => copyToClipboard(msg, task.id)} className={`px-6 py-3 rounded-xl font-semibold ${task.whatsappSent ? 'bg-green-100 text-green-600' : 'bg-green-500 text-white hover:bg-green-600'}`}>{task.whatsappSent ? 'ğŸ“‹ ×”×¢×ª×§' : 'ğŸ“± ×”×¢×ª×§ ×•×©×œ×—'}</button>
                                            </div>
                                        </div>
                                        <div className="bg-green-50 border-2 border-green-200 rounded-xl p-4">
                                            <pre className="whitespace-pre-wrap font-sans text-sm leading-relaxed">{msg}</pre>
                                        </div>
                                    </div>
                                );
                            })
                        )}
                    </div>
                </div>
            );
        }

        function ReportTab({ tasks, currentDate }) {
            return (
                <div className="bg-white rounded-xl shadow-lg p-6">
                    <h2 className="text-2xl font-bold mb-4">ğŸ“Š ×“×•×— ×™×•××™</h2>
                    <div className="text-gray-600">{tasks.length} ××©×™××•×ª ×œ×™×•× {new Date(currentDate).toLocaleDateString('he-IL')}</div>
                </div>
            );
        }

        function BackofficeTab({ farmData, updateFarmData }) {
            const [section, setSection] = useState('employees');
            const [newItem, setNewItem] = useState('');
            const [selectedFarm, setSelectedFarm] = useState('');
            const [newPlot, setNewPlot] = useState('');

            const addEmployee = () => {
                if (!newItem.trim()) return;
                updateFarmData({ ...farmData, employees: [...farmData.employees, { name: newItem.trim(), active: true }] });
                setNewItem('');
            };

            const toggleEmployee = (name) => {
                updateFarmData({ ...farmData, employees: farmData.employees.map(e => e.name === name ? { ...e, active: !e.active } : e) });
            };

            const addFarm = () => {
                if (!newItem.trim()) return;
                updateFarmData({ ...farmData, farms: [...farmData.farms, newItem.trim()], farmToPlots: { ...farmData.farmToPlots, [newItem.trim()]: [] } });
                setNewItem('');
            };

            const addPlot = () => {
                if (!selectedFarm || !newPlot.trim()) return;
                const plots = farmData.farmToPlots[selectedFarm] || [];
                updateFarmData({ ...farmData, farmToPlots: { ...farmData.farmToPlots, [selectedFarm]: [...plots, newPlot.trim()] } });
                setNewPlot('');
            };

            const deletePlot = (plot) => {
                if (!selectedFarm) return;
                const plots = farmData.farmToPlots[selectedFarm].filter(p => p !== plot);
                updateFarmData({ ...farmData, farmToPlots: { ...farmData.farmToPlots, [selectedFarm]: plots } });
            };

            const addWorkType = () => {
                if (!newItem.trim()) return;
                updateFarmData({ ...farmData, workTypes: [...farmData.workTypes, newItem.trim()] });
                setNewItem('');
            };

            return (
                <div className="space-y-6">
                    <div className="bg-white rounded-xl shadow-lg p-6">
                        <h2 className="text-2xl font-bold mb-4">âš™ï¸ × ×™×”×•×œ × ×ª×•× ×™×</h2>
                        <p className="text-gray-600 mb-6">×›××Ÿ ×ª×•×›×œ ×œ×¢×¨×•×š ××ª ×›×œ ×”×¢×•×‘×“×™×, ×”××©×§×™×, ×”×—×œ×§×•×ª ×•×¡×•×’×™ ×”×¢×‘×•×“×”</p>

                        <div className="flex gap-2 mb-6 overflow-x-auto">
                            <TabBtn active={section === 'employees'} onClick={() => setSection('employees')}>ğŸ‘¥ ×¢×•×‘×“×™× ({farmData.employees.length})</TabBtn>
                            <TabBtn active={section === 'farms'} onClick={() => setSection('farms')}>ğŸ¢ ××©×§×™× ({farmData.farms.length})</TabBtn>
                            <TabBtn active={section === 'plots'} onClick={() => setSection('plots')}>ğŸ“ ×—×œ×§×•×ª</TabBtn>
                            <TabBtn active={section === 'workTypes'} onClick={() => setSection('workTypes')}>âš™ï¸ ×¡×•×’×™ ×¢×‘×•×“×” ({farmData.workTypes.length})</TabBtn>
                        </div>

                        {section === 'employees' && (
                            <div>
                                <div className="flex gap-3 mb-4">
                                    <input type="text" value={newItem} onChange={(e) => setNewItem(e.target.value)} placeholder="×©× ×¢×•×‘×“ ×—×“×©" className="flex-1 px-4 py-2 border rounded-lg" onKeyPress={(e) => e.key === 'Enter' && addEmployee()} />
                                    <button onClick={addEmployee} className="bg-blue-500 text-white px-6 py-2 rounded-lg font-semibold">â• ×”×•×¡×£</button>
                                </div>
                                <div className="space-y-2 max-h-96 overflow-y-auto custom-scrollbar">
                                    {farmData.employees.map(e => (
                                        <div key={e.name} className={`flex items-center justify-between p-3 rounded-lg border-2 ${e.active ? 'bg-green-50 border-green-200' : 'bg-gray-50 border-gray-200'}`}>
                                            <span className="font-semibold">{e.name}</span>
                                            <button onClick={() => toggleEmployee(e.name)} className={`px-3 py-1 rounded-lg text-sm ${e.active ? 'bg-red-100 text-red-600' : 'bg-green-100 text-green-600'}`}>{e.active ? 'ğŸ”´ ×”×©×‘×ª' : 'ğŸŸ¢ ×”×¤×¢×œ'}</button>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}

                        {section === 'farms' && (
                            <div>
                                <div className="flex gap-3 mb-4">
                                    <input type="text" value={newItem} onChange={(e) => setNewItem(e.target.value)} placeholder="×©× ××©×§ ×—×“×©" className="flex-1 px-4 py-2 border rounded-lg" onKeyPress={(e) => e.key === 'Enter' && addFarm()} />
                                    <button onClick={addFarm} className="bg-blue-500 text-white px-6 py-2 rounded-lg font-semibold">â• ×”×•×¡×£</button>
                                </div>
                                <div className="space-y-2 max-h-96 overflow-y-auto custom-scrollbar">
                                    {farmData.farms.map(f => (
                                        <div key={f} className="flex items-center justify-between p-3 bg-gray-50 rounded-lg border-2 border-gray-200">
                                            <div>
                                                <span className="font-semibold">{f}</span>
                                                <span className="text-sm text-gray-600 mr-2">({farmData.farmToPlots[f]?.length || 0} ×—×œ×§×•×ª)</span>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}

                        {section === 'plots' && (
                            <div>
                                <div className="mb-4">
                                    <label className="block text-sm font-medium mb-1">×‘×—×¨ ××©×§</label>
                                    <select value={selectedFarm} onChange={(e) => setSelectedFarm(e.target.value)} className="w-full px-4 py-2 border rounded-lg">
                                        <option value="">×‘×—×¨ ××©×§</option>
                                        {farmData.farms.map(f => <option key={f} value={f}>{f}</option>)}
                                    </select>
                                </div>
                                {selectedFarm && (
                                    <>
                                        <div className="flex gap-3 mb-4">
                                            <input type="text" value={newPlot} onChange={(e) => setNewPlot(e.target.value)} placeholder="×©× ×—×œ×§×” ×—×“×©×”" className="flex-1 px-4 py-2 border rounded-lg" onKeyPress={(e) => e.key === 'Enter' && addPlot()} />
                                            <button onClick={addPlot} className="bg-blue-500 text-white px-6 py-2 rounded-lg font-semibold">â• ×”×•×¡×£</button>
                                        </div>
                                        <div className="space-y-2">
                                            {(farmData.farmToPlots[selectedFarm] || []).map(p => (
                                                <div key={p} className="flex items-center justify-between p-3 bg-gray-50 rounded-lg border-2 border-gray-200">
                                                    <span>{p}</span>
                                                    <button onClick={() => deletePlot(p)} className="px-3 py-1 bg-red-100 text-red-600 rounded-lg text-sm">ğŸ—‘ï¸</button>
                                                </div>
                                            ))}
                                        </div>
                                    </>
                                )}
                            </div>
                        )}

                        {section === 'workTypes' && (
                            <div>
                                <div className="flex gap-3 mb-4">
                                    <input type="text" value={newItem} onChange={(e) => setNewItem(e.target.value)} placeholder="×¡×•×’ ×¢×‘×•×“×” ×—×“×©" className="flex-1 px-4 py-2 border rounded-lg" onKeyPress={(e) => e.key === 'Enter' && addWorkType()} />
                                    <button onClick={addWorkType} className="bg-blue-500 text-white px-6 py-2 rounded-lg font-semibold">â• ×”×•×¡×£</button>
                                </div>
                                <div className="space-y-2 max-h-96 overflow-y-auto custom-scrollbar">
                                    {farmData.workTypes.map(w => (
                                        <div key={w} className="p-3 bg-gray-50 rounded-lg border-2 border-gray-200">
                                            <span className="font-semibold">{w}</span>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        function TabBtn({ active, onClick, children }) {
            return <button onClick={onClick} className={`px-4 py-2 rounded-lg font-semibold whitespace-nowrap ${active ? 'bg-blue-500 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}`}>{children}</button>;
        }

        ReactDOM.render(<WorkManagementApp />, document.getElementById('root'));
    </script>
</body>
</html>
